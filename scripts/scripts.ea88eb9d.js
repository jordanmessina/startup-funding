function sortByKey(a,b){return a.sort(function(a,c){var d=a[b],e=c[b];return d>e?-1:e>d?1:0})}function Founder(a,b){this.name=a,this.equity=b}function Investor(a){this.name=a,this.investments=[]}function ConvertibleNote(a,b){this.cap=a,this.discount=b,this.investments=[]}function EquityRound(a){this.preMoneyValuation=a,this.investments=[]}function Investment(a,b,c){this.investor=a,this.investmentTerms=b,this.amount=c;for(var d=b.investments.length,e=!1,f=0;d>f;f++)b.investments[f].investor===a&&(e=!0);var g=this;e||(this.investor.investments.push(g),this.investmentTerms.investments.push(g))}function Startup(){this.founders=[],this.investors=[],this.convertibleNotes=[],this.equityRounds=[]}!function(a,b){var c,d;return d=b.document,c=function(){function c(c){var d;try{d=b.localStorage}catch(e){d=!1}this._options=a.extend({name:"tour",steps:[],container:"body",autoscroll:!0,keyboard:!0,storage:d,debug:!1,backdrop:!1,backdropPadding:0,redirect:!0,orphan:!1,duration:!1,delay:!1,basePath:"",template:'<div class="popover intro-popover" role="tooltip"> <div class="arrow"></div> <h3 class="popover-title"></h3> <div class="popover-content"></div> <div class="popover-navigation"> <div class="btn-group"> <button class="btn btn-sm btn-default" data-role="prev">&#x276e; Prev</button> <button class="btn btn-sm btn-default" data-role="next">Next &#x276f;</button> <button class="btn btn-sm btn-default" data-role="pause-resume" data-pause-text="Pause" data-resume-text="Resume">Pause</button> </div> <button class="btn btn-sm btn-default" data-role="end">End tour</button> </div> </div>',afterSetState:function(){},afterGetState:function(){},afterRemoveState:function(){},onStart:function(){},onEnd:function(){},onShow:function(){},onShown:function(){},onHide:function(){},onHidden:function(){},onNext:function(){},onPrev:function(){},onPause:function(){},onResume:function(){}},c),this._force=!1,this._inited=!1,this.backdrop={overlay:null,$element:null,$background:null,backgroundShown:!1,overlayElementShown:!1}}return c.prototype.addSteps=function(a){var b,c,d;for(c=0,d=a.length;d>c;c++)b=a[c],this.addStep(b);return this},c.prototype.addStep=function(a){return this._options.steps.push(a),this},c.prototype.getStep=function(b){return null!=this._options.steps[b]?a.extend({id:"step-"+b,path:"",placement:"right",title:"",content:"<p></p>",next:b===this._options.steps.length-1?-1:b+1,prev:b-1,animation:!0,container:this._options.container,autoscroll:this._options.autoscroll,backdrop:this._options.backdrop,backdropPadding:this._options.backdropPadding,redirect:this._options.redirect,orphan:this._options.orphan,duration:this._options.duration,delay:this._options.delay,template:this._options.template,onShow:this._options.onShow,onShown:this._options.onShown,onHide:this._options.onHide,onHidden:this._options.onHidden,onNext:this._options.onNext,onPrev:this._options.onPrev,onPause:this._options.onPause,onResume:this._options.onResume},this._options.steps[b]):void 0},c.prototype.init=function(a){return this._force=a,this.ended()?(this._debug("Tour ended, init prevented."),this):(this.setCurrentStep(),this._initMouseNavigation(),this._initKeyboardNavigation(),this._onResize(function(a){return function(){return a.showStep(a._current)}}(this)),null!==this._current&&this.showStep(this._current),this._inited=!0,this)},c.prototype.start=function(a){var b;return null==a&&(a=!1),this._inited||this.init(a),null===this._current&&(b=this._makePromise(null!=this._options.onStart?this._options.onStart(this):void 0),this._callOnPromiseDone(b,this.showStep,0)),this},c.prototype.next=function(){var a;return a=this.hideStep(this._current),this._callOnPromiseDone(a,this._showNextStep)},c.prototype.prev=function(){var a;return a=this.hideStep(this._current),this._callOnPromiseDone(a,this._showPrevStep)},c.prototype.goTo=function(a){var b;return b=this.hideStep(this._current),this._callOnPromiseDone(b,this.showStep,a)},c.prototype.end=function(){var c,e;return c=function(c){return function(){return a(d).off("click.tour-"+c._options.name),a(d).off("keyup.tour-"+c._options.name),a(b).off("resize.tour-"+c._options.name),c._setState("end","yes"),c._inited=!1,c._force=!1,c._clearTimer(),null!=c._options.onEnd?c._options.onEnd(c):void 0}}(this),e=this.hideStep(this._current),this._callOnPromiseDone(e,c)},c.prototype.ended=function(){return!this._force&&!!this._getState("end")},c.prototype.restart=function(){return this._removeState("current_step"),this._removeState("end"),this.start()},c.prototype.pause=function(){var a;return a=this.getStep(this._current),a&&a.duration?(this._paused=!0,this._duration-=(new Date).getTime()-this._start,b.clearTimeout(this._timer),this._debug("Paused/Stopped step "+(this._current+1)+" timer ("+this._duration+" remaining)."),null!=a.onPause?a.onPause(this,this._duration):void 0):this},c.prototype.resume=function(){var a;return a=this.getStep(this._current),a&&a.duration?(this._paused=!1,this._start=(new Date).getTime(),this._duration=this._duration||a.duration,this._timer=b.setTimeout(function(a){return function(){return a._isLast()?a.next():a.end()}}(this),this._duration),this._debug("Started step "+(this._current+1)+" timer with duration "+this._duration),null!=a.onResume&&this._duration!==a.duration?a.onResume(this,this._duration):void 0):this},c.prototype.hideStep=function(b){var c,d,e;return(e=this.getStep(b))?(this._clearTimer(),d=this._makePromise(null!=e.onHide?e.onHide(this,b):void 0),c=function(c){return function(){var d;return d=a(e.element),d.data("bs.popover")||d.data("popover")||(d=a("body")),d.popover("destroy").removeClass("tour-"+c._options.name+"-element tour-"+c._options.name+"-"+b+"-element"),e.reflex&&d.removeClass("tour-step-element-reflex").off(""+c._reflexEvent(e.reflex)+".tour-"+c._options.name),e.backdrop&&c._hideBackdrop(),null!=e.onHidden?e.onHidden(c):void 0}}(this),this._callOnPromiseDone(d,c),d):void 0},c.prototype.showStep=function(a){var c,e,f,g;return this.ended()?(this._debug("Tour ended, showStep prevented."),this):(g=this.getStep(a))?(f=a<this._current,c=this._makePromise(null!=g.onShow?g.onShow(this,a):void 0),e=function(b){return function(){var c,e,h;if(b.setCurrentStep(a),e=function(){switch({}.toString.call(g.path)){case"[object Function]":return g.path();case"[object String]":return this._options.basePath+g.path;default:return g.path}}.call(b),c=[d.location.pathname,d.location.hash].join(""),b._isRedirect(e,c))return void b._redirect(g,e);if(b._isOrphan(g)){if(!g.orphan)return b._debug("Skip the orphan step "+(b._current+1)+".\nOrphan option is false and the element does not exist or is hidden."),void(f?b._showPrevStep():b._showNextStep());b._debug("Show the orphan step "+(b._current+1)+". Orphans option is true.")}return g.backdrop&&b._showBackdrop(b._isOrphan(g)?void 0:g.element),h=function(){return b.getCurrentStep()===a?(null!=g.element&&g.backdrop&&b._showOverlayElement(g),b._showPopover(g,a),null!=g.onShown&&g.onShown(b),b._debug("Step "+(b._current+1)+" of "+b._options.steps.length)):void 0},g.autoscroll?b._scrollIntoView(g.element,h):h(),g.duration?b.resume():void 0}}(this),g.delay?(this._debug("Wait "+g.delay+" milliseconds to show the step "+(this._current+1)),b.setTimeout(function(a){return function(){return a._callOnPromiseDone(c,e)}}(this),g.delay)):this._callOnPromiseDone(c,e),c):void 0},c.prototype.getCurrentStep=function(){return this._current},c.prototype.setCurrentStep=function(a){return null!=a?(this._current=a,this._setState("current_step",a)):(this._current=this._getState("current_step"),this._current=null===this._current?null:parseInt(this._current,10)),this},c.prototype._setState=function(a,b){var c,d;if(this._options.storage){d=""+this._options.name+"_"+a;try{this._options.storage.setItem(d,b)}catch(e){c=e,c.code===DOMException.QUOTA_EXCEEDED_ERR&&this.debug("LocalStorage quota exceeded. State storage failed.")}return this._options.afterSetState(d,b)}return null==this._state&&(this._state={}),this._state[a]=b},c.prototype._removeState=function(a){var b;return this._options.storage?(b=""+this._options.name+"_"+a,this._options.storage.removeItem(b),this._options.afterRemoveState(b)):null!=this._state?delete this._state[a]:void 0},c.prototype._getState=function(a){var b,c;return this._options.storage?(b=""+this._options.name+"_"+a,c=this._options.storage.getItem(b)):null!=this._state&&(c=this._state[a]),(void 0===c||"null"===c)&&(c=null),this._options.afterGetState(a,c),c},c.prototype._showNextStep=function(){var a,b,c;return c=this.getStep(this._current),b=function(a){return function(){return a.showStep(c.next)}}(this),a=this._makePromise(null!=c.onNext?c.onNext(this):void 0),this._callOnPromiseDone(a,b)},c.prototype._showPrevStep=function(){var a,b,c;return c=this.getStep(this._current),b=function(a){return function(){return a.showStep(c.prev)}}(this),a=this._makePromise(null!=c.onPrev?c.onPrev(this):void 0),this._callOnPromiseDone(a,b)},c.prototype._debug=function(a){return this._options.debug?b.console.log("Bootstrap Tour '"+this._options.name+"' | "+a):void 0},c.prototype._isRedirect=function(a,b){return null!=a&&""!==a&&("[object RegExp]"==={}.toString.call(a)&&!a.test(b)||"[object String]"==={}.toString.call(a)&&a.replace(/\?.*$/,"").replace(/\/?$/,"")!==b.replace(/\/?$/,""))},c.prototype._redirect=function(b,c){return a.isFunction(b.redirect)?b.redirect.call(this,c):b.redirect===!0?(this._debug("Redirect to "+c),d.location.href=c):void 0},c.prototype._isOrphan=function(b){return null==b.element||!a(b.element).length||a(b.element).is(":hidden")&&"http://www.w3.org/2000/svg"!==a(b.element)[0].namespaceURI},c.prototype._isLast=function(){return this._current<this._options.steps.length-1},c.prototype._showPopover=function(b,c){var d,e,f,g;return a(".tour-"+this._options.name).remove(),g=a.extend({},this._options),f=this._isOrphan(b),b.template=this._template(b,c),f&&(b.element="body",b.placement="top"),d=a(b.element),d.addClass("tour-"+this._options.name+"-element tour-"+this._options.name+"-"+c+"-element"),b.options&&a.extend(g,b.options),b.reflex&&!f&&(d.addClass("tour-step-element-reflex"),d.off(""+this._reflexEvent(b.reflex)+".tour-"+this._options.name),d.on(""+this._reflexEvent(b.reflex)+".tour-"+this._options.name,function(a){return function(){return a._isLast()?a.next():a.end()}}(this))),d.popover({placement:b.placement,trigger:"manual",title:b.title,content:b.content,html:!0,animation:b.animation,container:b.container,template:b.template,selector:b.element}).popover("show"),e=d.data("bs.popover")?d.data("bs.popover").tip():d.data("popover").tip(),e.attr("id",b.id),this._reposition(e,b),f?this._center(e):void 0},c.prototype._template=function(b,c){var d,e,f,g;return g=a(a.isFunction(b.template)?b.template(c,b):b.template),d=g.find(".popover-navigation"),f=d.find('[data-role="prev"]'),e=d.find('[data-role="next"]'),this._isOrphan(b)&&g.addClass("orphan"),g.addClass("tour-"+this._options.name+" tour-"+this._options.name+"-"+c),b.prev<0&&d.find('[data-role="prev"]').addClass("disabled"),b.next<0&&d.find('[data-role="next"]').addClass("disabled"),b.duration||d.find('[data-role="pause-resume"]').remove(),g.clone().wrap("<div>").parent().html()},c.prototype._reflexEvent=function(a){return"[object Boolean]"==={}.toString.call(a)?"click":a},c.prototype._reposition=function(b,c){var e,f,g,h,i,j,k;if(h=b[0].offsetWidth,f=b[0].offsetHeight,k=b.offset(),i=k.left,j=k.top,e=a(d).outerHeight()-k.top-b.outerHeight(),0>e&&(k.top=k.top+e),g=a("html").outerWidth()-k.left-b.outerWidth(),0>g&&(k.left=k.left+g),k.top<0&&(k.top=0),k.left<0&&(k.left=0),b.offset(k),"bottom"===c.placement||"top"===c.placement){if(i!==k.left)return this._replaceArrow(b,2*(k.left-i),h,"left")}else if(j!==k.top)return this._replaceArrow(b,2*(k.top-j),f,"top")},c.prototype._center=function(c){return c.css("top",a(b).outerHeight()/2-c.outerHeight()/2)},c.prototype._replaceArrow=function(a,b,c,d){return a.find(".arrow").css(d,b?50*(1-b/c)+"%":"")},c.prototype._scrollIntoView=function(c,d){var e,f,g,h,i,j;return e=a(c),e.length?(f=a(b),h=e.offset().top,j=f.height(),i=Math.max(0,h-j/2),this._debug("Scroll into view. ScrollTop: "+i+". Element offset: "+h+". Window height: "+j+"."),g=0,a("body, html").stop(!0,!0).animate({scrollTop:Math.ceil(i)},function(a){return function(){return 2===++g?(d(),a._debug("Scroll into view.\nAnimation end element offset: "+e.offset().top+".\nWindow height: "+f.height()+".")):void 0}}(this))):d()},c.prototype._onResize=function(c,d){return a(b).on("resize.tour-"+this._options.name,function(){return clearTimeout(d),d=setTimeout(c,100)})},c.prototype._initMouseNavigation=function(){var b;return b=this,a(d).off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='prev']").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='next']").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='end']").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='pause-resume']").on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='next']",function(a){return function(b){return b.preventDefault(),a.next()}}(this)).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='prev']",function(a){return function(b){return b.preventDefault(),a.prev()}}(this)).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='end']",function(a){return function(b){return b.preventDefault(),a.end()}}(this)).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='pause-resume']",function(c){var d;return c.preventDefault(),d=a(this),d.text(d.data(b._paused?"pause-text":"resume-text")),b._paused?b.resume():b.pause()})},c.prototype._initKeyboardNavigation=function(){return this._options.keyboard?a(d).on("keyup.tour-"+this._options.name,function(a){return function(b){if(b.which)switch(b.which){case 39:return b.preventDefault(),a._isLast()?a.next():a.end();case 37:if(b.preventDefault(),a._current>0)return a.prev();break;case 27:return b.preventDefault(),a.end()}}}(this)):void 0},c.prototype._makePromise=function(b){return b&&a.isFunction(b.then)?b:null},c.prototype._callOnPromiseDone=function(a,b,c){return a?a.then(function(a){return function(){return b.call(a,c)}}(this)):b.call(this,c)},c.prototype._showBackdrop=function(){return this.backdrop.backgroundShown?void 0:(this.backdrop=a("<div>",{"class":"tour-backdrop"}),this.backdrop.backgroundShown=!0,a("body").append(this.backdrop))},c.prototype._hideBackdrop=function(){return this._hideOverlayElement(),this._hideBackground()},c.prototype._hideBackground=function(){return this.backdrop?(this.backdrop.remove(),this.backdrop.overlay=null,this.backdrop.backgroundShown=!1):void 0},c.prototype._showOverlayElement=function(b){var c,d;return c=a(b.element),c&&0!==c.length&&!this.backdrop.overlayElementShown?(this.backdrop.overlayElementShown=!0,this.backdrop.$element=c.addClass("tour-step-backdrop"),this.backdrop.$background=a("<div>",{"class":"tour-step-background"}),d={width:c.innerWidth(),height:c.innerHeight(),offset:c.offset()},this.backdrop.$background.appendTo("body"),b.backdropPadding&&(d=this._applyBackdropPadding(b.backdropPadding,d)),this.backdrop.$background.width(d.width).height(d.height).offset(d.offset)):void 0},c.prototype._hideOverlayElement=function(){return this.backdrop.overlayElementShown?(this.backdrop.$element.removeClass("tour-step-backdrop"),this.backdrop.$background.remove(),this.backdrop.$element=null,this.backdrop.$background=null,this.backdrop.overlayElementShown=!1):void 0},c.prototype._applyBackdropPadding=function(a,b){return"object"==typeof a?(null==a.top&&(a.top=0),null==a.right&&(a.right=0),null==a.bottom&&(a.bottom=0),null==a.left&&(a.left=0),b.offset.top=b.offset.top-a.top,b.offset.left=b.offset.left-a.left,b.width=b.width+a.left+a.right,b.height=b.height+a.top+a.bottom):(b.offset.top=b.offset.top-a,b.offset.left=b.offset.left-a,b.width=b.width+2*a,b.height=b.height+2*a),b},c.prototype._clearTimer=function(){return b.clearTimeout(this._timer),this._timer=null,this._duration=null},c}(),b.Tour=c}(jQuery,window),Investor.prototype.deleteInvestment=function(a){var b=this.investments.indexOf(a);if(-1!==b){var c=this.investments[b].investmentTerms;c.deleteInvestment(this.investments[b])}},Investor.prototype.deleteInvestments=function(){for(;this.investments.length;){var a=this.investments[0].investmentTerms;a.deleteInvestment(this.investments[0])}},Investor.prototype.totalInvestment=function(){for(var a=this.investments.length,b=0,c=0;a>c;c++)b+=this.investments[c].amount;return b},ConvertibleNote.prototype.addInvestor=function(a,b){new Investment(a,this,b)},ConvertibleNote.prototype.deleteInvestment=function(a){var b=this.investments.indexOf(a);if(-1!==b){var c=this.investments[b].investor,d=c.investments.indexOf(a);-1!==d&&c.investments.splice(d,1),this.investments.splice(b,1)}},ConvertibleNote.prototype.deleteInvestments=function(){for(;this.investments.length;)this.deleteInvestment(this.investments[0])},ConvertibleNote.prototype.totalInvestment=function(){for(var a=this.investments.length,b=0,c=0;a>c;c++)b+=this.investments[c].amount;return b},EquityRound.prototype.addInvestor=function(a,b){new Investment(a,this,b)},EquityRound.prototype.deleteInvestment=function(a){var b=this.investments.indexOf(a);if(-1!==b){var c=this.investments[b].investor,d=c.investments.indexOf(a);-1!==d&&c.investments.splice(d,1),this.investments.splice(b,1)}},EquityRound.prototype.deleteInvestments=function(){for(;this.investments.length;)this.deleteInvestment(this.investments[0])},EquityRound.prototype.totalInvestment=function(){for(var a=this.investments.length,b=0,c=0;a>c;c++)b+=this.investments[c].amount;return b},Investment.prototype.deleteInvestment=function(){this.investor.deleteInvestment(this),this.investmentTerms.deleteInvestment(this)},Startup.prototype.totalFounderEquity=function(){for(var a=0,b=this.founders.length,c=0;b>c;c++)a+=this.founders[c].equity;return a},Startup.prototype.addFounder=function(a){this.totalFounderEquity()<100&&a.equity+this.totalFounderEquity()<=100&&(this.founders.push(a),this.founders=sortByKey(this.founders,"equity"))},Startup.prototype.removeFounder=function(a){var b=this.founders.indexOf(a);-1!==b&&this.founders.splice(b,1)},Startup.prototype.removeFounders=function(){for(;0!==this.founders.length;)this.removeFounder(this.founders[0])},Startup.prototype.removeInvestor=function(a){a.deleteInvestments()},Startup.prototype.removeInvestors=function(){for(;0!==this.investors.length;)this.removeInvestor(this.investors[0])},Startup.prototype.gatherInvestors=function(){for(var a=[],b=this.convertibleNotes.length,c=this.equityRounds.length,d=0;b>d;d++)for(var e=this.convertibleNotes[d].investments.length,f=0;e>f;f++){var g=this.convertibleNotes[d].investments[f].investor;-1===a.indexOf(g)&&a.push(g)}for(var h=0;c>h;h++)for(var e=this.equityRounds[h].investments.length,f=0;e>f;f++){var g=this.equityRounds[h].investments[f].investor;-1===a.indexOf(g)&&a.push(g)}this.investors=a},Startup.prototype.addConvertibleNote=function(a){-1===this.convertibleNotes.indexOf(a)&&this.convertibleNotes.push(a)},Startup.prototype.removeConvertibleNote=function(a){var b=this.convertibleNotes.indexOf(a);-1!==b&&(a.deleteInvestments(),this.convertibleNotes.splice(b,1))},Startup.prototype.removeConvertibleNotes=function(){for(;0!==this.convertibleNotes.length;)this.removeConvertibleNote(this.convertibleNotes[0])},Startup.prototype.addEquityRound=function(a){-1===this.equityRounds.indexOf(a)&&this.equityRounds.push(a)},Startup.prototype.removeEquityRound=function(a){var b=this.equityRounds.indexOf(a);-1!==b&&(a.deleteInvestments(),this.equityRounds.splice(b,1))},Startup.prototype.removeEquityRounds=function(){for(;0!==this.equityRounds.length;)this.removeEquityRound(this.equityRounds[0])},Startup.prototype.capTable=function(){this.gatherInvestors();var a=[];if(0===this.equityRounds.length||0!==this.equityRounds.length&&0===this.equityRounds[0].investments.length){for(var b=this.founders.length,c=0;b>c;c++)a.push({person:this.founders[c],equity:this.founders[c].equity});for(var d=this.investors.length,e=0;d>e;e++)a.push({person:this.investors[e],equity:0});return sortByKey(a,"equity")}for(var f=this.equityRounds[0].preMoneyValuation,g=this.equityRounds[0].totalInvestment(),h=g/(g+f)*100,i=this.equityRounds[0].investments.length,j=0;i>j;j++){var k=this.equityRounds[0].investments[j];a.push({person:k.investor,equity:k.amount/(g+f)*100})}for(var l=this.convertibleNotes.length,m=0,n=0;l>n;n++)for(var o=this.convertibleNotes[n].cap,p=this.convertibleNotes[n].discount,q=this.convertibleNotes[n].investments.length,j=0;q>j;j++){var k=this.convertibleNotes[n].investments[j],r=Math.max(k.amount/((100-p)/100*f)*100,k.amount/Math.min(o,f)*100);r*=(100-h)/100;for(var s=a.length,t=-1,u=0;s>u;u++)a[u].person===k.investor&&(t=u);-1!==t?a[t].equity+=r:a.push({person:k.investor,equity:r}),m+=r}for(var v=h+m,b=this.founders.length,w=0;b>w;w++){var x=this.founders[w],r=x.equity*((100-v)/100);a.push({person:x,equity:r})}var y=this.equityRounds.length-1;if(y>0)for(var z=1;y>=z;z++){for(var f=this.equityRounds[z].preMoneyValuation,A=this.equityRounds[z].totalInvestment(),B=A/(A+f)*100,C=this.equityRounds[z].investments.length,s=a.length,u=0;s>u;u++)a[u].equity=a[u].equity*((100-B)/100);for(var j=0;C>j;j++){for(var k=this.equityRounds[z].investments[j],r=k.amount/(A+f)*100,s=a.length,t=-1,u=0;s>u;u++)a[u].person===k.investor&&(t=u);-1!==t?a[t].equity+=r:a.push({person:k.investor,equity:r})}}return sortByKey(a,"equity")};var app=angular.module("fundingApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html"}).otherwise({redirectTo:"/"})}]);angular.module("fundingApp").factory("startupService",["$log",function(){var a={startup:new Startup,investors:[],capTable:[]};return a.updateCapTable=function(){a.capTable=a.startup.capTable()},a}]),angular.module("fundingApp").controller("TutorialCtrl",["$scope","$rootScope","$log","startupService",function(a,b,c,d){a.startupService=d,a.tutorial=new Tour({steps:[{content:"This interactive tutorial walks through a hypothetical company. When first starting a company, you need to decide how to split up equity amongst your co-foudners. There's a lot of <a href=\"https://www.google.com/webhp?q=how+to+split+equity\">opinions</a> on how to do this, but I think it's best if all founders have the same amount of stock. The work put in by everyone in the years to come will trump any work that has already been done by the company. The important thing about founder stock is that there's <a href=\"\">vesting</a> in place to protect everyone. Equity % is a calculation of the total number of shares a founder has divided by the total outstanding shares in the company. Let's assume there are 1,000,000 outstanding shares. Grace, Merideth, Danielle, and Elon would each have 250,000 shares a piece (250,000/1,000,000 = 25%).",element:"#foundersTutorial",onNext:function(){a.setupStep1(),b.$broadcast("TutorialUpdate")}},{content:"This is a list of all your investors. There are different <a href=\"https://www.rocketlawyer.com/article/types-of-investors-for-startups.rl\">types</a> of investors. We'll be adding angels (high net worth individuals that invest their own personal funds) and VCs (funds that invest other people's money on their behalf).",element:"#investorsTutorial",onNext:function(){a.setupStep2(),b.$broadcast("TutorialUpdate")},onPrev:function(){a.setupStep0(),b.$broadcast("TutorialUpdate")}},{content:'A Convertible Note (CN) is an investment intrument that can be thought of as an <a href="http://en.wikipedia.org/wiki/IOU">IOU</a> for equity in your company. The CNs that your company raises money on will not convert into equity until later in the future when you raise money again at a priced round (more on this in the next section). CNs are generally used for the first couple rounds of funding because they are much less complicated from a legal and time perspective. CNs have two main properties, a Valuation Cap and a Discount Rate. A valuation cap puts a threshold on the conversion price of the debt. A discount rate is the percentage off the per share price. These will make more sense after we understand equity rounds and show how the two work together.',placement:"bottom",element:"#convertibleNotesTutorial",onNext:function(){a.setupStep3(),b.$broadcast("TutorialUpdate")},onPrev:function(){a.setupStep1(),b.$broadcast("TutorialUpdate")}},{content:"For this section, we're going to remove the convertible notes in order to get a full grasp of equity rounds. We'll add them back after this section. During an equity round (often times called a Series A for the first one, and increasing a letter each subsequent round. eg - Series B, Series C) some investor will take time to determine what they think your company is currently worth. This is known as a Valuation. They will then buy stock from the company at that valuation. For example, let's say <a href=\"http://a16z.com/\">Andreessen Horowitz</a> wants to invest in your company, and they've decided that your company is currently worth $4,000,000, which is known as the Pre-Money Valuation. This would mean each share in the company is worth $4 ($4,000,000 / 1,000,000 shares total). They would then invest money at this valuation, paying $4 per share. For each share purchased, the company would issue new shares, increasing the amount of total shares issued. If Andreessen Horowitz was to invest $1,000,000 into your company, they would purchase 250,000 shares, which would mean there are now 1,250,000 shares, making Andreessens ownership stake 20% (250,000/1,000,000). Because the comp    anies Valuation was $4,000,000 and $1,000,000 was invested in the company, the company is said to havea Post-Money valuation for $5,000,000 ($4,000,000 + $1,000,000). Because each founder still has their original 250,000 shares, but there are now more shares issued than when initially starting the company, the founders equity % goes down to 20% (from the original 25%). This is known as dilution. Now let's add back the convertible notes and see how those are affected by the equity round.",placement:"top",element:"#equityTutorial",onNext:function(){a.setupStep4(),b.$broadcast("TutorialUpdate")},onPrev:function(){a.setupStep2(),b.$broadcast("TutorialUpdate")}},{placement:"left",content:"We've added back the CNs. As said earlier, CNs are converted during the equity round. The determining factor for the amount of equiyt the investor will get is the pre-mone valuation. TODO",element:"#convertibleNotesTutorial",onNext:function(){},onPrev:function(){a.setupStep3(),b.$broadcast("TutorialUpdate")}}]}),a.tutorial.init(),a.setupStep0=function(){for(d.startup.removeFounders(),d.startup.removeConvertibleNotes(),d.startup.removeEquityRounds();0!==d.investors.length;)d.investors.splice(0,1);d.updateCapTable(),d.startup.addFounder(new Founder("Grace",25)),d.startup.addFounder(new Founder("Merideth",25)),d.startup.addFounder(new Founder("Danielle",25)),d.startup.addFounder(new Founder("Elon",25)),d.updateCapTable()},a.setupStep1=function(){for(d.startup.removeConvertibleNotes(),d.startup.removeEquityRounds();0!==d.investors.length;)d.investors.splice(0,1);d.investors.push(new Investor("J Cal")),d.investors.push(new Investor("Naval")),d.investors.push(new Investor("Marissa")),d.investors.push(new Investor("K Rose")),d.investors.push(new Investor("a16z")),d.updateCapTable()},a.setupStep2=function(){d.startup.removeConvertibleNotes(),d.startup.removeEquityRounds();var a=new ConvertibleNote(4e6,20);a.addInvestor(d.investors[0],5e4),a.addInvestor(d.investors[1],75e3),a.addInvestor(d.investors[2],1e5),a.addInvestor(d.investors[3],2e5),d.startup.addConvertibleNote(a),d.updateCapTable()},a.setupStep3=function(){d.startup.removeConvertibleNotes(),d.startup.removeEquityRounds();var a=new EquityRound(4e6);a.addInvestor(d.investors[4],1e6),d.startup.addEquityRound(a),d.updateCapTable()},a.setupStep4=function(){d.startup.removeConvertibleNotes(),d.startup.removeEquityRounds();var a=new ConvertibleNote(4e6,20);a.addInvestor(d.investors[0],5e4),a.addInvestor(d.investors[1],75e3),a.addInvestor(d.investors[2],1e5),a.addInvestor(d.investors[3],2e5);var b=new EquityRound(4e6);b.addInvestor(d.investors[4],1e6),d.startup.addEquityRound(b),d.startup.addConvertibleNote(a),d.updateCapTable()},a.startTutorial=function(){for($("#gotIt").click(),d.startup.removeFounders(),d.startup.removeConvertibleNotes(),d.startup.removeEquityRounds();0!==d.investors.length;)d.investors.splice(0,1);d.updateCapTable(),a.setupStep0(),a.tutorial.start(!0).goTo(0)}}]),angular.module("fundingApp").controller("FoundersCtrl",["$scope","$rootScope","$log","startupService",function(a,b,c,d){a.founders=d.startup.founders,a.addFounder=function(){d.startup.addFounder(a.newFounder),a.newFounder={},d.updateCapTable()},a.removeFounder=function(b){d.startup.removeFounder(a.founders[b]),d.updateCapTable()},a.totalFounderEquity=d.startup.totalFounderEquity,b.$on("TutorialUpdate",function(){a.$apply()})}]).directive("startupFounders",function(){return{templateUrl:"templates/founders.html"}}),angular.module("fundingApp").controller("InvestorsCtrl",["$scope","$rootScope","$log","startupService",function(a,b,c,d){a.investors=d.investors,a.addInvestor=function(){d.investors.push(new Investor(a.newInvestor.name)),a.newInvestor={}},a.removeInvestor=function(b){d.startup.removeInvestor(a.investors[b]),d.investors.splice(b,1),d.updateCapTable()},a.noDuplicateInvestors=function(){for(var b=a.investors.length,c=0;b>c;c++)if(a.investors[c].name===a.newInvestor.name)return!1;return!0},b.$on("TutorialUpdate",function(){a.$apply()})}]).directive("startupInvestors",function(){return{templateUrl:"templates/investors.html"}}),angular.module("fundingApp").controller("ConvertibleNotesCtrl",["$scope","$rootScope","$log","startupService",function(a,b,c,d){a.founders=d.startup.founders,a.investors=d.investors,a.convertibleNotes=d.startup.convertibleNotes,a.addConvertibleNote=function(){d.startup.addConvertibleNote(new ConvertibleNote(a.newConvertibleNote.cap,a.newConvertibleNote.discount)),a.newConvertibleNote={}},a.removeConvertibleNote=function(b){d.startup.removeConvertibleNote(a.convertibleNotes[b]),d.updateCapTable()},a.addInvestorToConvertibleNote=function(b){d.startup.convertibleNotes[b].addInvestor(a.investors[a.investorToAddToConvertibleNote.investor],a.investorToAddToConvertibleNote.amount),a.investorToAddToConvertibleNote={},d.updateCapTable()},a.removeInvestorFromConvertibleNote=function(b,c){var e=a.convertibleNotes[b];e.deleteInvestment(e.investments[c]),d.updateCapTable()},b.$on("TutorialUpdate",function(){a.$apply()})}]).directive("convertibleNotes",function(){return{templateUrl:"templates/convertiblenotes.html"}}),angular.module("fundingApp").controller("EquityRoundsCtrl",["$scope","$rootScope","$log","startupService",function(a,b,c,d){a.founders=d.startup.founders,a.investors=d.investors,a.equityRounds=d.startup.equityRounds,a.addEquityRound=function(){d.startup.addEquityRound(new EquityRound(a.newEquityRound.preMoneyValuation)),a.newEquityRound={}},a.removeEquityRound=function(b){d.startup.removeEquityRound(a.equityRounds[b]),d.updateCapTable()},a.addInvestorToEquityRound=function(b){d.startup.equityRounds[b].addInvestor(a.investors[a.investorToAddToEquityRound.investor],a.investorToAddToEquityRound.amount),a.investorToAddToEquityRound={},d.updateCapTable()},a.removeInvestorFromEquityRound=function(b,c){var e=a.equityRounds[b];e.deleteInvestment(e.investments[c]),d.updateCapTable()},a.totalRaised=d.totalRaised,b.$on("TutorialUpdate",function(){a.$apply()})}]).directive("equityRounds",function(){return{templateUrl:"templates/equityrounds.html"}}),angular.module("fundingApp").controller("FinalEquityCtrl",["$scope","$rootScope","$log","startupService",function(a,b,c,d){a.founders=d.startup.founders,a.startupService=d,b.$on("TutorialUpdate",function(){a.$apply()
})}]).directive("finalEquity",function(){return{templateUrl:"templates/finalequity.html"}});